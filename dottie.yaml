# Dottie Configuration for KDE Neon (Ubuntu-based)
# Usage:
#   dottie validate minimal
#   dottie validate dev
#   dottie link -p minimal
#   dottie link -p dev
#   dottie install -p minimal
#   dottie install -p dev

profiles:
  # ============================================================================
  # MINIMAL PROFILE
  # Base system with essential CLI tools and shell configuration
  # ============================================================================
  minimal:
    dotfiles:
      # Bash profile with aliases and Starship integration
      - source: dotfiles/.bashrc
        target: ~/.bashrc
      
      # Starship prompt configuration
      - source: dotfiles/starship.toml
        target: ~/.config/starship.toml

      # Git configuration
      - source: dotfiles/.gitconfig
        target: ~/.gitconfig

    install:
      # Fonts - JetBrains Mono (primary dev font with ligatures)
      fonts:
        - name: "JetBrainsMono"
          url: "https://download.jetbrains.com/fonts/JetBrainsMono-2.304.zip"
        - name: "JetBrainsMono Nerd Font"
          url: "https://github.com/ryanoasis/nerd-fonts/releases/download/v3.4.0/JetBrainsMono.zip"

      # GitHub releases - binaries installed to ~/bin
      github:
        - repo: jqlang/jq
          asset: "jq-linux-amd64"
          binary: jq
          version: "1.8.1"
        - repo: starship/starship
          asset: "starship-x86_64-unknown-linux-gnu.tar.gz"
          binary: starship
          version: "1.24.2"
        - repo: github/copilot-cli
          asset: "copilot-linux-x64.tar.gz"
          binary: copilot
          version: "0.0.407"

      # APT packages - basic CLI tools
      apt:
        - git
        - curl
        - wget
        - htop
        - tree
        - unzip
        - ca-certificates
        - gnupg
        - lsb-release
        - apt-transport-https
        - software-properties-common

      # Custom scripts
      #scripts:

      # APT repositories with packages
      # aptRepos:
      #   # GitHub CLI
      #   - name: github-cli
      #     key_url: https://cli.github.com/packages/githubcli-archive-keyring.gpg
      #     repo: "deb [arch=${MS_ARCH}] https://cli.github.com/packages stable main"
      #     packages:
      #       - gh

  # ============================================================================
  # DESKTOP PROFILE
  # Desktop applications extending minimal profile
  # ============================================================================
  desktop:
    extends: minimal

    install:
      # APT repositories with packages
      aptRepos:
        # Google Chrome
        - name: google-chrome
          key_url: https://dl.google.com/linux/linux_signing_key.pub
          repo: "deb [arch=${MS_ARCH}] https://dl.google.com/linux/chrome/deb/ stable main"
          packages:
            - google-chrome-stable

        # Spotify
        - name: spotify
          key_url: https://download.spotify.com/debian/pubkey_5384CE82BA52C83A.asc
          repo: "deb https://repository.spotify.com stable non-free"
          packages:
            - spotify-client

        # Typora - Markdown editor
        - name: typora
          key_url: https://downloads.typora.io/typora.gpg
          repo: "deb [signed-by=${SIGNING_FILE}] https://downloads.typora.io/linux ./"
          packages:
            - typora

  # ============================================================================
  # DEV PROFILE
  # Full development environment extending desktop profile
  # ============================================================================
  dev:
    extends: desktop

    dotfiles:
      # PowerShell profile with Starship integration
      - source: dotfiles/Microsoft.PowerShell_profile.ps1
        target: ~/.config/powershell/Microsoft.PowerShell_profile.ps1

    install:
      # APT packages for dev
      apt:
        - build-essential

      # GitHub releases - dev tooling binaries installed to ~/bin
      github:
        # k9s - Kubernetes terminal UI
        - repo: derailed/k9s
          asset: "k9s_Linux_${MS_ARCH}.tar.gz"
          binary: k9s

        # yq - YAML processor
        - repo: mikefarah/yq
          asset: "yq_linux_${MS_ARCH}"
          binary: yq

        # kustomize - Kubernetes native config management
        - repo: kubernetes-sigs/kustomize
          asset: "kustomize_v5.8.1_linux_${MS_ARCH}.tar.gz"
          binary: kustomize
          version: "kustomize/v5.8.1"

      # Custom scripts for dev tools
      #scripts:

      # APT repositories with packages
      aptRepos:
        # Kubernetes packages
        - name: kubernetes
          key_url: https://pkgs.k8s.io/core:/stable:/v1.34/deb/Release.key
          repo: "deb [signed-by=${SIGNING_FILE}] https://pkgs.k8s.io/core:/stable:/v1.34/deb/ /"
          packages:
            - kubectl

        # Docker
        - name: docker
          key_url: https://download.docker.com/linux/ubuntu/gpg
          repo: "deb [arch=${MS_ARCH}] https://download.docker.com/linux/ubuntu ${VERSION_CODENAME} stable"
          packages:
            - docker-ce
            - docker-ce-cli
            - containerd.io
            - docker-buildx-plugin
            - docker-compose-plugin

        # Microsoft packages (.NET, PowerShell, Azure CLI)
        - name: microsoft-packages
          key_url: https://packages.microsoft.com/keys/microsoft.asc
          repo: "deb [arch=${MS_ARCH}] https://packages.microsoft.com/repos/microsoft-ubuntu-${VERSION_CODENAME}-prod/ ${VERSION_CODENAME} main"
          packages:
            - dotnet-sdk-9.0
            - dotnet-sdk-10.0
            - powershell
            - dotnet-sdk-8.0
            - azure-cli

        # VS Code
        - name: vscode
          key_url: https://packages.microsoft.com/keys/microsoft.asc
          repo: "deb [arch=${MS_ARCH}] https://packages.microsoft.com/repos/code stable main"
          packages:
            - code

        # Helm
        - name: helm
          key_url: https://packages.buildkite.com/helm-linux/helm-debian/gpgkey
          repo: "deb [signed-by=${SIGNING_FILE}] https://packages.buildkite.com/helm-linux/helm-debian/any/ any main"
          packages:
            - helm

        # HashiCorp (Terraform)
        - name: hashicorp
          key_url: https://apt.releases.hashicorp.com/gpg
          repo: "deb [arch=${MS_ARCH}] https://apt.releases.hashicorp.com ${VERSION_CODENAME} main"
          packages:
            - terraform

      # Snap packages
      snaps:
        # JetBrains Rider - .NET IDE
        - name: rider
          classic: true
        
        # Visual Studio Code
        - name: code
          classic: true
        
        # DataGrip - Database IDE
        - name: datagrip
          classic: true
        
        # draw.io - Diagramming tool
        - name: drawio
          classic: false

  # ============================================================================
  # DEFAULT PROFILE
  # Alias for dev profile (full development setup)
  # ============================================================================
  default:
    extends: dev
